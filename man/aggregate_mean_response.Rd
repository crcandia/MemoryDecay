% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/utils.R
\name{aggregate_mean_response}
\alias{aggregate_mean_response}
\title{Aggregate Mean Response by Age and Grouping Variables}
\usage{
aggregate_mean_response(
  data,
  age_var,
  response_var,
  group_var = NULL,
  group_var2 = NULL,
  filter_age = Inf
)
}
\arguments{
\item{data}{A data frame containing memory or attention data (e.g., from surveys, citations, or popularity time series).}

\item{age_var}{Name of the column representing age or time (e.g., years since event or birth).}

\item{response_var}{Name of the numeric response variable to average (e.g., correct recall rate, citations).}

\item{group_var}{(Optional) First grouping variable name (e.g., "same_country", "decay_bin").}

\item{group_var2}{(Optional) Second grouping variable name (e.g., "attention_level", "demographic").}

\item{filter_age}{(Optional) Maximum value of age to include in the output (default: \code{Inf} = keep all).}
}
\value{
A data frame with one row per combination of:
\describe{
  \item{age_metric}{Numeric value representing time or age.}
  \item{mean_response}{The average of the response variable within each group/age.}
  \item{group_var}{(Optional) Column named as passed by user.}
  \item{group_var2}{(Optional) Column named as passed by user.}
}
}
\description{
This function computes the average of a response variable (e.g., recall accuracy, citation count)
over time or historical age. It is particularly useful for preparing clean, aggregated data
for plotting or model fitting in memory decay studies.
}
\details{
You can optionally provide up to two grouping variables to stratify the results:
- `group_var`: A primary categorical dimension (e.g., geographic match, decay bin).
- `group_var2`: A secondary categorical dimension (e.g., attention level, quantile group).

Both grouping variables are preserved in the output using their original column names.
If no grouping is provided, the function returns the global mean response at each time point.

The output always contains a column named `age_metric` to standardize time/age representation
across functions in the package.
}
\examples{
# Aggregate recall by age and location
aggregated <- aggregate_mean_response(
  data = survey_data,
  age_var = "age_metric",
  response_var = "performance_score",
  group_var = "location_flag"
)

}
