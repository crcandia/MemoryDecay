% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/utils.R
\name{merge_bins_with_original}
\alias{merge_bins_with_original}
\title{Merge Decay Bins with Original Time-Series Data}
\usage{
merge_bins_with_original(wide_data, bins_df, replace_na_with_zero = TRUE)
}
\arguments{
\item{wide_data}{A data frame in wide format, with a \code{time} column and one column per entity (e.g., paper or product).}

\item{bins_df}{A data frame of decay bins with the same number of rows as \code{wide_data} and one column per entity (excluding time).}

\item{replace_na_with_zero}{Logical. If \code{TRUE} (default), missing values in the attention matrix are replaced with 0.}
}
\value{
A long-format data frame with the following columns:
\describe{
  \item{time}{Time point (e.g., year or semester).}
  \item{doi}{Unique identifier for each entity (e.g., paper ID).}
  \item{value}{Observed attention value at that time (e.g., number of citations).}
  \item{decay_bin}{Decay bin assigned to that time/entity pair (may be \code{NA} for zero attention).}
}
}
\description{
This function combines the original wide-format time-series matrix with its corresponding decay bin matrix
(e.g., from \code{\link{assign_decay_bins}}), converting both into long format and joining them
for downstream modeling or visualization.
}
\details{
Each entry in the resulting dataset represents the attention (e.g., citations, views, mentions)
received by an item at a specific time, along with its corresponding decay bin. This is especially useful
for stratified modeling of attention decay across different levels of cumulative popularity.
}
\section{Treatment of Zero Attention}{


As emphasized in Candia et al. (2019, \emph{Nature Human Behaviour}), attention values of zero are
not missing data — they indicate genuine lack of attention or forgetting. Therefore, by default, this function:
\itemize{
  \item Converts all \code{NA} values in the attention matrix to 0.
  \item Ensures that zeroes contribute to aggregated averages (e.g., \eqn{\Delta c(t)}), making them reflective of the true collective state.
}
This behavior can be disabled by setting \code{replace_na_with_zero = FALSE}.

In this function, **NA values are replaced by 0** to represent *genuine lack of attention* 
(e.g., zero citations in a given time window). This ensures that zeros are 
**included in averages and decay modeling**, as described in Candia et al. (2019). 
Including zeros is important for measuring the true dynamics of collective forgetting.
}

\examples{
# See full pipeline: reshape_citation_timeseries() → compute_cumulative_matrix() → assign_decay_bins()
# Then use merge_bins_with_original() to finalize the long-format dataset.

}
\seealso{
\code{\link{assign_decay_bins}}, \code{\link{process_time_series_bins}}, \code{\link{reshape_citation_timeseries}}
}
