% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/utils.R
\name{process_time_series_bins}
\alias{process_time_series_bins}
\title{Process Time-Series Citation Data and Assign Decay Bins}
\usage{
process_time_series_bins(data)
}
\arguments{
\item{data}{A long-format citation dataset with at least two columns: 
\code{time} (e.g., semester, year) and \code{doi} (unique item ID).}
}
\value{
A long-format data frame with the following columns:
\describe{
  \item{time}{Time point of the observation (e.g., year or semester).}
  \item{doi}{Unique identifier for each paper or entity.}
  \item{value}{Number of citations or attention units at that time.}
  \item{decay_bin}{Decay bin assigned based on cumulative attention (can be \code{NA} for uncited items).}
}
}
\description{
This function provides a full pipeline to prepare time-series attention or citation data
for decay analysis. It reshapes the data from long to wide format, computes cumulative
attention over time, assigns each item to a decay bin using log-scaled thresholds, and
merges the result back to a long-format data frame for modeling or visualization.
}
\details{
The typical use case involves datasets where each row represents a citation event,
with columns such as `time` and `doi`, and the goal is to understand forgetting
or attention decay dynamics across items of different cumulative popularity.

## Steps Performed:
\enumerate{
  \item Reshape long-format citation data into wide format using \code{\link{reshape_citation_timeseries}}.
  \item Compute cumulative citation counts over time using \code{\link{compute_cumulative_matrix}}.
  \item Assign each cumulative value to a decay bin using \code{\link{assign_decay_bins}}, based on log-scaled binning.
  \item Merge decay bin labels back to the original data using \code{\link{merge_bins_with_original}}.
}

## Treatment of Zero Values:

- When computing decay bins, items with \strong{zero cumulative attention} are excluded from bin computation
  because log-scaling is undefined at zero. These entries are assigned \code{NA} in the decay_bin column.

- However, when merging bins back to the time-series matrix, \code{\link{merge_bins_with_original}} replaces
  missing values (NAs) in the attention matrix with \code{0}, treating them as informative "no-attention" events.
  This is consistent with the logic in Candia et al. (2019, \emph{Nature Human Behaviour}).
}
\seealso{
\code{\link{assign_decay_bins}}, \code{\link{merge_bins_with_original}}, \code{\link{plot_raw_memory_decay}}
}
