% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/utils.R
\name{process_data}
\alias{process_data}
\title{Process and Clean Survey-Based Memory Data for Decay Curve Modeling}
\usage{
process_data(
  data,
  id_col = "slug",
  age_var = "age_metric",
  group_var = NULL,
  replies_col = NULL,
  group_var2 = NULL,
  quantile = 1,
  percentile = 0.99,
  filter_n = 3
)
}
\arguments{
\item{data}{A data frame with raw survey-based memory or attention responses.}

\item{id_col}{Name of the unique identifier column (e.g., "slug", "person_id"). Default: \code{"slug"}.}

\item{age_var}{Name of the age or time-since-event variable. Default: \code{"age_metric"}.}

\item{group_var}{Optional. First grouping variable for stratified modeling (e.g., "same_country").}

\item{replies_col}{Optional. Column with number of responses per item (e.g., "n_replies") used for filtering.}

\item{group_var2}{Optional. Column representing accumulated attention (e.g., "global") used for outlier removal and quantile binning.}

\item{quantile}{Integer. Number of quantile bins to create from \code{group_var2} (default: 1 = no bins).}

\item{percentile}{Numeric [0, 1]. Threshold to remove top outliers in \code{group_var2} (default: 0.99).}

\item{filter_n}{Minimum number of replies required to keep an item (default: 3).}
}
\value{
A cleaned and annotated data frame ready for forgetting curve modeling. Columns may include:
\itemize{
  \item Filtered items with sufficient responses.
  \item Age variable standardized to \code{age_metric}.
  \item Optional columns for group, attention level, and outlier-stripped popularity.
}
}
\description{
This function prepares noisy memory or recall survey data for forgetting curve analysis. 
It includes filtering, outlier removal, and optional grouping or stratification steps. 
It is tailored for use in cross-sectional or recall-based studies (e.g., cultural memory, icon recall).
}
\details{
Specifically, the function:
\itemize{
  \item Filters out IDs with too few responses (e.g., less than 3).
  \item Removes outliers in accumulated attention using a top percentile threshold.
  \item Optionally classifies items into quantiles based on attention/popularity (e.g., deciles).
  \item Keeps grouping variables for later stratified model fitting.
}

This is often a first preprocessing step before applying forgetting models such as
\code{\link{fit_biexponential_model}}, \code{\link{fit_lognormal_log_model}}, or 
\code{\link{fit_exponential_log_model}}.
}
\examples{
# Load and preprocess a dataset
data(survey_data)
cleaned <- process_data(
  survey_data,
  id_col = "entity_id",
  age_var = "age_metric",
  replies_col = "reply_count",
  group_var = "location_flag",
  group_var2 = "performance_score",
  quantile = 3
)

}
